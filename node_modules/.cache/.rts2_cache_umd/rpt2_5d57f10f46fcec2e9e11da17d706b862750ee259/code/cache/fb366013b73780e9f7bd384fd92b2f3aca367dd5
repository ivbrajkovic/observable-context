{"code":"import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useEffect, useRef, useState } from \"react\";\nimport classes from \"./ObservableTracker.module.css\";\nimport { createPortal } from \"react-dom\";\nimport \"./ObservableTracker.module.css\";\nfunction ObservableTracker(props) {\n    const observable = props.useObservableContext();\n    const observableTrackerRef = useRef(null);\n    const observableTrackerHeaderRef = useRef(null);\n    const [state, setState] = useState(() => ({ ...observable.observed }));\n    const [subscribers, setSubscribers] = useState([]);\n    useEffect(() => {\n        const getSubscribers = () => {\n            const sub = observable.printSubscribers();\n            if (Array.isArray(sub))\n                setSubscribers(sub);\n        };\n        observable.onSubscribe = getSubscribers;\n        observable.onUnsubscribe = getSubscribers;\n    }, []);\n    useEffect(() => {\n        const subscription = observable.subscribeAll((key, value) => setState((state) => ({ ...state, [key]: value })));\n        return subscription;\n    }, []);\n    useEffect(() => {\n        if (!observableTrackerRef.current)\n            return;\n        if (!observableTrackerHeaderRef.current)\n            return;\n        const observableTracker = observableTrackerRef.current;\n        const observableTrackerHeader = observableTrackerHeaderRef.current;\n        let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;\n        observableTrackerHeader.onmousedown = dragMouseDown;\n        function dragMouseDown(e) {\n            e.preventDefault();\n            pos3 = e.clientX;\n            pos4 = e.clientY;\n            document.onmouseup = closeDragElement;\n            document.onmousemove = elementDrag;\n        }\n        function elementDrag(e) {\n            e.preventDefault();\n            pos1 = pos3 - e.clientX;\n            pos2 = pos4 - e.clientY;\n            pos3 = e.clientX;\n            pos4 = e.clientY;\n            observableTracker.style.top = observableTracker.offsetTop - pos2 + \"px\";\n            observableTracker.style.left = observableTracker.offsetLeft - pos1 + \"px\";\n        }\n        function closeDragElement() {\n            document.onmouseup = null;\n            document.onmousemove = null;\n        }\n    }, []);\n    return (_jsx(_Fragment, { children: createPortal(_jsxs(\"article\", { ref: observableTrackerRef, className: classes.card, children: [_jsx(\"header\", { ref: observableTrackerHeaderRef, children: _jsx(\"h3\", { children: \"Observable Tracker\" }) }), _jsxs(\"main\", { children: [_jsxs(\"section\", { children: [_jsx(\"p\", { children: \"State:\" }), _jsx(\"pre\", { children: JSON.stringify(state, null, 2) })] }), _jsxs(\"section\", { children: [_jsxs(\"p\", { children: [\"Subscribers (\", subscribers.length, \"):\"] }), _jsx(\"div\", { className: classes[\"subscriber-card-container\"], children: subscribers.map((subscriber) => (_jsxs(\"div\", { className: classes[\"subscriber-card\"], children: [_jsxs(\"p\", { children: [\"Key: \", subscriber.key] }), _jsxs(\"p\", { children: [\"Handler: \", subscriber.handler] })] }, `${subscriber.key}-${subscriber.handler}`))) })] })] })] }), document.body) }));\n}\nexport default ObservableTracker;\n//# sourceMappingURL=ObservableTracker.js.map","references":["C:/Users/Ivan/Desktop/utility-creator-ts/node_modules/@types/react/index.d.ts","C:/Users/Ivan/Desktop/utility-creator-ts/packages/observable-context/src/class/Observable.tsx","C:/Users/Ivan/Desktop/utility-creator-ts/node_modules/@types/react-dom/index.d.ts"],"map":"{\"version\":3,\"file\":\"ObservableTracker.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/components/ObservableTracker/ObservableTracker.tsx\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"C:/Users/Ivan/Desktop/utility-creator-ts/packages/observable-context/types/components/ObservableTracker/ObservableTracker.d.ts","writeByteOrderMark":false,"text":"import { Observable } from \"class/Observable\";\nimport \"./ObservableTracker.module.css\";\ndeclare function ObservableTracker<T extends Record<string, unknown>>(props: {\n    useObservableContext: () => Observable<T>;\n}): import(\"react/jsx-runtime\").JSX.Element;\nexport default ObservableTracker;\n"}}
